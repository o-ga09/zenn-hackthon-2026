# コード品質管理

## 品質管理方針

AI旅行Vlog自動生成アプリでは、高品質なコードベースの維持と継続的な改善を重視している。

## コード品質基準

### フロントエンド (TypeScript/React)

#### 静的解析

- **リンター**: Oxlint (ESLint代替) による高速リンティング
- **型チェック**: TypeScriptコンパイラーによる厳密な型チェック
- **フォーマッター**: Prettier による一貫したコードフォーマット

#### コード規約

- **命名規約**: PascalCase (コンポーネント)、camelCase (関数)、SCREAMING_SNAKE_CASE (定数)
- **ファイル構造**: 機能別グループ化、関心の分離
- **インポート順序**: React/Next.js → サードパーティ → ローカル

#### 品質チェック項目

- [ ] Oxlint実行でエラー・警告なし
- [ ] TypeScript型チェック通過
- [ ] Prettier適用済み
- [ ] コンポーネントの単一責任原則
- [ ] カスタムフックによるロジック抽出
- [ ] 適切なエラーハンドリング

### バックエンド (Go)

#### 静的解析

- **リンター**: golangci-lint による包括的なリンティング
- **フォーマッター**: gofmt による標準フォーマット
- **競合検出**: go race detector による競合状態検出

#### コード規約

- **命名規約**: PascalCase (エクスポート)、camelCase (プライベート)
- **パッケージ構造**: クリーンアーキテクチャ原則
- **インポート順序**: 標準ライブラリ → サードパーティ → ローカル

#### 品質チェック項目

- [ ] golangci-lint実行でエラー・警告なし
- [ ] go vet実行でエラーなし
- [ ] gofmt適用済み
- [ ] 適切なエラーハンドリング
- [ ] インターフェース活用による疎結合
- [ ] テストカバレッジ確保

## テスト戦略

### フロントエンド

#### テストツール

- **ユニットテスト**: Vitest
- **コンポーネントテスト**: React Testing Library
- **E2Eテスト**: Playwright (必要に応じて)

#### テスト方針

- **コンポーネント**: 主要なビジネスロジックを含むコンポーネント
- **カスタムフック**: 複雑なロジックを含むフック
- **ユーティリティ**: 共通ユーティリティ関数

### バックエンド

#### テストツール

- **ユニットテスト**: Go標準テストパッケージ
- **統合テスト**: testcontainers (データベーステスト)
- **APIテスト**: httptest パッケージ

#### テスト方針

- **ドメインロジック**: ビジネスロジックの網羅的テスト
- **リポジトリ**: データアクセス層のテスト
- **ハンドラー**: HTTPエンドポイントのテスト

## PR品質管理

### PRテンプレート活用

#### 必須チェック項目

- **コード品質**: リンター、フォーマッター、型チェック実行
- **テスト**: 関連テストの実行・更新
- **ドキュメント**: 関連ドキュメントの更新
- **セキュリティ**: セキュリティ観点での確認

#### レビュー観点

- **設計**: アーキテクチャ原則への準拠
- **パフォーマンス**: 性能への影響確認
- **保守性**: コードの可読性・保守性
- **セキュリティ**: 脆弱性の有無

## 継続的改善

### メトリクス収集

#### コード品質メトリクス

- **技術的負債**: SonarQube等による技術的負債測定
- **複雑度**: サイクロマティック複雑度の監視
- **重複**: コード重複率の測定

#### 開発効率メトリクス

- **PR品質**: レビュー回数、修正回数の追跡
- **バグ率**: 本番環境でのバグ発生率
- **開発速度**: 機能開発からリリースまでの時間

### 改善プロセス

#### 定期レビュー

- **月次**: コード品質メトリクスのレビュー
- **四半期**: 開発プロセスの見直し
- **年次**: 技術スタック・ツールの評価

#### 知識共有

- **コードレビュー**: 建設的なフィードバック文化
- **技術勉強会**: 新技術・ベストプラクティスの共有
- **ドキュメント**: 学んだ知見のSteeringファイル反映

## ツール設定

### 開発環境

#### エディタ設定

- **VSCode**: 推奨拡張機能の統一
- **設定同期**: .vscode/settings.json による設定共有
- **フォーマット**: 保存時自動フォーマット

#### Git設定

- **pre-commit**: コミット前の自動品質チェック
- **commit-msg**: コミットメッセージ規約の自動チェック
- **pre-push**: プッシュ前のテスト実行

### CI/CD連携

#### GitHub Actions

- **品質チェック**: PR作成時の自動品質チェック
- **テスト実行**: 自動テスト実行・結果報告
- **デプロイ**: 品質基準クリア後の自動デプロイ

## セキュリティ品質

### セキュリティチェック

#### 静的解析

- **脆弱性スキャン**: 依存関係の脆弱性チェック
- **シークレット検出**: 機密情報の誤コミット防止
- **コード解析**: セキュリティ観点でのコード解析

#### 運用セキュリティ

- **認証・認可**: 適切な認証・認可実装の確認
- **データ保護**: 個人情報・機密データの適切な取り扱い
- **通信セキュリティ**: HTTPS、適切な暗号化の確認

### セキュリティ教育

#### 開発者教育

- **セキュリティ研修**: 定期的なセキュリティ教育
- **脅威モデリング**: 新機能開発時の脅威分析
- **インシデント対応**: セキュリティインシデント対応手順

## 品質文化

### チーム文化

#### 品質意識

- **品質第一**: 機能よりも品質を優先する文化
- **継続改善**: 小さな改善の積み重ね
- **学習文化**: 失敗から学ぶ姿勢

#### コラボレーション

- **建設的レビュー**: 批判ではなく改善提案
- **知識共有**: 個人の知見をチーム全体で共有
- **メンタリング**: 経験者による新メンバー支援
